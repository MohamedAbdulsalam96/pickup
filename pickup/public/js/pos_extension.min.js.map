{"version":3,"file":"pos_extension.min.js","sources":["../../../../apps/pickup/pickup/pickup/custom_scripts/pos.js","../../../../apps/pickup/pickup/public/js/controllers/taxes_and_totals.js","../../../../apps/pickup/pickup/public/js/payment/payments.js"],"sourcesContent":["// Copyright (c) 2018, Britlog and contributors\n// For license information, please see license.txt\n\nerpnext.pos.PointOfSale = erpnext.pos.PointOfSale.extend({\n\n\tmake_customer: function (wrapper) {\n\t\tthis._super(wrapper);\n\t\tthis.list_customers_btn = this.page.wrapper.find('.list-customers-btn');\n\t\tthis.list_customers_btn.after($('<button class=\"btn btn-default get-orders-btn\" style=\"margin-left: 12px\"><i class=\"octicon octicon-gift\"></i></button>'));\n\t\tthis.get_customer_orders();\n\t},\n\n\tget_customer_orders: function (wrapper) {\n\t\tvar me = this;\n\t\tthis.get_orders_btn = this.page.wrapper.find('.get-orders-btn');\n\n\t\tthis.page.wrapper.on('click', '.get-orders-btn', function(wrapper) {\n\t\t\tme.customer_validate();\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'pickup.pickup.doctype.pickup_slot.pickup_slot.get_items_from_sales_order',\n\t\t\t\targs: {\n\t\t\t\t\t'customer': me.frm.doc.customer,\n\t\t\t\t\t'pickup_slot': me.pos_profile_data.pickup_slot\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\t//console.log(r.message);\n\n\t\t\t\t\t(r.message || []).forEach(function(row){\n\t\t\t\t\t\tme.items = me.get_items(row.item_code)\n\t\t\t\t\t\tme.add_to_cart();\n\t\t\t\t\t\tif (row.qty != 1) {\n\t\t\t\t\t\t\tme.update_qty(row.item_code, row.qty);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tme.child.uom = row.uom;\n\t\t\t\t\t\tme.set_item_details(row.item_code, \"rate\", row.rate);\n\t\t\t\t\t\tme.update_value();\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n//\t\t\t$(\".get-orders-btn\").prop(\"disabled\",true);\n\t\t})\n\t},\n})","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nerpnext.taxes_and_totals.prototype.calculate_outstanding_amount = function(update_paid_amount) {\n\t// NOTE:\n\t// paid_amount and write_off_amount is only for POS Invoice\n\t// total_advance is only for non POS Invoice\n\n\tif(this.frm.doc.doctype == \"Sales Invoice\" && this.frm.doc.is_return){\n\t\tthis.calculate_paid_amount();\n\t}\n\n\tif(this.frm.doc.is_return || this.frm.doc.docstatus > 0) return;\n\n\tfrappe.model.round_floats_in(this.frm.doc, [\"grand_total\", \"total_advance\", \"write_off_amount\"]);\n\n\tif(in_list([\"Sales Invoice\", \"Purchase Invoice\"], this.frm.doc.doctype)) {\n\t\tvar grand_total = this.frm.doc.rounded_total || this.frm.doc.grand_total;\n\n\t\tif(this.frm.doc.party_account_currency == this.frm.doc.currency) {\n\t\t\tvar total_amount_to_pay = flt((grand_total - this.frm.doc.total_advance\n\t\t\t\t- this.frm.doc.write_off_amount + this.frm.doc.balance_amount), precision(\"grand_total\"));\n\t\t} else {\n\t\t\tvar total_amount_to_pay = flt(\n\t\t\t\t(flt(grand_total*this.frm.doc.conversion_rate, precision(\"grand_total\"))\n\t\t\t\t\t- this.frm.doc.total_advance - this.frm.doc.base_write_off_amount)\n\t\t\t\t\t+ this.frm.doc.balance_amount, precision(\"base_grand_total\")\n\t\t\t);\n\t\t}\n\n\t\tfrappe.model.round_floats_in(this.frm.doc, [\"paid_amount\"]);\n\t\tthis.set_in_company_currency(this.frm.doc, [\"paid_amount\"]);\n\n\t\tif(this.frm.refresh_field){\n\t\t\tthis.frm.refresh_field(\"paid_amount\");\n\t\t\tthis.frm.refresh_field(\"base_paid_amount\");\n\t\t}\n\n\t\tif(this.frm.doc.doctype == \"Sales Invoice\") {\n\t\t\tthis.set_default_payment(total_amount_to_pay, update_paid_amount);\n\t\t\tthis.calculate_paid_amount();\n\t\t}\n\t\tthis.calculate_change_amount();\n\n\t\tvar paid_amount = (this.frm.doc.party_account_currency == this.frm.doc.currency) ?\n\t\t\tthis.frm.doc.paid_amount : this.frm.doc.base_paid_amount;\n\n\t\tthis.frm.doc.outstanding_amount =  flt(total_amount_to_pay - flt(paid_amount) +\n\t\t\tflt(this.frm.doc.change_amount * this.frm.doc.conversion_rate), precision(\"outstanding_amount\"));\n\t}\n}\n\nerpnext.taxes_and_totals.prototype.calculate_change_amount = function(){\n\tthis.frm.doc.change_amount = 0.0;\n\tthis.frm.doc.base_change_amount = 0.0;\n\tif(this.frm.doc.doctype == \"Sales Invoice\"\n\t\t&& this.frm.doc.paid_amount > (this.frm.doc.grand_total + this.frm.doc.balance_amount)\n\t\t&& !this.frm.doc.is_return) {\n\n\t\tvar payment_types = $.map(this.frm.doc.payments, function(d) { return d.type; });\n\t\tif (in_list(payment_types, 'Cash')) {\n\t\t\tvar grand_total = this.frm.doc.rounded_total || this.frm.doc.grand_total;\n\t\t\tvar base_grand_total = this.frm.doc.base_rounded_total || this.frm.doc.base_grand_total;\n\n\t\t\tthis.frm.doc.change_amount = flt(this.frm.doc.paid_amount - grand_total +\n\t\t\t\tthis.frm.doc.write_off_amount - this.frm.doc.balance_amount, precision(\"change_amount\"));\n\n\t\t\tthis.frm.doc.base_change_amount = flt(this.frm.doc.base_paid_amount -\n\t\t\t\tbase_grand_total + this.frm.doc.base_write_off_amount -\tthis.frm.doc.balance_amount,\n\t\t\t\tprecision(\"base_change_amount\"));\n\t\t}\n\t}\n}\n\nerpnext.taxes_and_totals.prototype.calculate_write_off_amount = function(){\n\tif(this.frm.doc.paid_amount > this.frm.doc.grand_total){\n\t\tthis.frm.doc.write_off_amount = flt(this.frm.doc.grand_total - this.frm.doc.paid_amount\n\t\t\t+ this.frm.doc.change_amount + this.frm.doc.balance_amount, precision(\"write_off_amount\"));\n\n\t\tthis.frm.doc.base_write_off_amount = flt(this.frm.doc.write_off_amount * this.frm.doc.conversion_rate,\n\t\t\tprecision(\"base_write_off_amount\"));\n\t}else{\n\t\tthis.frm.doc.paid_amount = 0.0;\n\t}\n\tthis.calculate_outstanding_amount(false);\n}\n\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\n// new function\nerpnext.payments.prototype.balance_amount = function(balance_amount) {\n\tvar me = this;\n\n\tthis.frm.doc.balance_amount = flt(balance_amount, precision(\"balance_amount\"));\n\tthis.calculate_outstanding_amount(false)\n\tthis.show_amounts()\n}\n\nerpnext.payments.prototype.get_customer_balance = function(customer) {\n\tvar me = this;\n\n\tfrappe.call({\n\t\tmethod: 'pickup.pickup.custom_classes.pos.get_customer_balance',\n\t\targs: {\n\t\t\t'customer': customer\n\t\t},\n\t\tcallback: function(r) {\n//\t\t\tconsole.log(r.message);\n\n\t\t\tvar balance = flt(r.message);\n\t\t\tif (balance > 0)\n\t\t\t\t$(me.$body).find('#customer-balance-label').text(__(\"Solde (DÃ»)\"));\n\t\t\telse\n\t\t\t\t$(me.$body).find('#customer-balance-label').text(__(\"Solde (Avoir)\"));\n\n\t\t\t$(me.$body).find('#customer-balance').text(format_currency(balance, me.frm.doc.currency)).val(balance);\n\t\t}\n\t})\n}\n\n// override functions\nerpnext.payments.prototype.show_payment_details = function(){\n\tvar me = this;\n\tvar multimode_payments = $(this.$body).find('.multimode-payments').empty();\n\tif(this.frm.doc.payments.length){\n\t\t$.each(this.frm.doc.payments, function(index, data){\n\t\t\t$(frappe.render_template('payment_details', {\n\t\t\t\tmode_of_payment: data.mode_of_payment,\n\t\t\t\tamount: data.amount,\n\t\t\t\tidx: data.idx,\n\t\t\t\tcurrency: me.frm.doc.currency,\n\t\t\t\ttype: data.type\n\t\t\t})).appendTo(multimode_payments)\n\n\t\t\tif (data.type == 'Cash' && data.amount == me.frm.doc.paid_amount) {\n\t\t\t\tme.idx = data.idx;\n\t\t\t\tme.selected_mode = $(me.$body).find(repl(\"input[idx='%(idx)s']\",{'idx': me.idx}));\n\t\t\t\tme.highlight_selected_row();\n\t\t\t\tme.bind_amount_change_event();\n\t\t\t}\n\t\t})\n\t}else{\n\t\t$(\"<p>No payment mode selected in pos profile</p>\").appendTo(multimode_payments)\n\t}\n\n\t//Get customer balance value\n\tme.get_customer_balance(me.frm.doc.customer);\n\n}\n\nerpnext.payments.prototype.set_outstanding_amount = function(){\n\tthis.selected_mode = $(this.$body).find(repl(\"input[idx='%(idx)s']\",{'idx': this.idx}));\n\tthis.highlight_selected_row()\n\tthis.payment_val = 0.0\n\tif(this.frm.doc.outstanding_amount > 0 && flt(this.selected_mode.val()) == 0.0){\n\t\t//When user first time click on row\n\t\tthis.payment_val = flt(this.frm.doc.outstanding_amount / this.frm.doc.conversion_rate, precision(\"outstanding_amount\"))\n\n\t\tif(this.idx == 'balance_amount'){\n\t\t\tthis.selected_mode.val(format_currency($(this.$body).find('#customer-balance').val(), this.frm.doc.currency));\n\t\t}else{\n\t\t\tthis.selected_mode.val(format_currency(this.payment_val, this.frm.doc.currency));\n\t\t\tthis.update_payment_amount();\n\t\t}\n\n\t}else if(flt(this.selected_mode.val()) > 0){\n\t\t//If user click on existing row which has value\n\t\tthis.payment_val = flt(this.selected_mode.val());\n\t}\n\tthis.selected_mode.select()\n\tthis.bind_amount_change_event();\n}\n\t\nerpnext.payments.prototype.bind_form_control_event = function(){\n\tvar me = this;\n\t$(this.$body).find('.pos-payment-row').click(function(){\n\t\tme.idx = $(this).attr(\"idx\");\n\t\tme.set_outstanding_amount()\n\t})\n\n\t$(this.$body).find('.form-control').click(function(){\n\t\tme.idx = $(this).attr(\"idx\");\n\t\tme.set_outstanding_amount();\n\t\tme.update_paid_amount(true);\n\t})\n\n\t$(this.$body).find('.write_off_amount').change(function(){\n\t\tme.write_off_amount(flt($(this).val()), precision(\"write_off_amount\"));\n\t})\n\n\t$(this.$body).find('.change_amount').change(function(){\n\t\tme.change_amount(flt($(this).val()), precision(\"change_amount\"));\n\t})\n\n\t$(this.$body).find('.balance_amount').change(function(){\n\t\tme.balance_amount(flt($(this).val()), precision(\"balance_amount\"));\n\t})\n}\n\nerpnext.payments.prototype.update_paid_amount = function(update_write_off) {\n\tvar me = this;\n\tif(in_list(['change_amount', 'write_off_amount', 'balance_amount'], this.idx)){\n\t\tvar value = me.selected_mode.val();\n\t\tif(me.idx == 'change_amount'){\n\t\t\tme.change_amount(value)\n\t\t} else if(me.idx == 'write_off_amount'){\n\t\t\tif(flt(value) == 0 && update_write_off && me.frm.doc.outstanding_amount > 0) {\n\t\t\t\tvalue = flt(me.frm.doc.outstanding_amount / me.frm.doc.conversion_rate, precision(me.idx));\n\t\t\t}\n\t\t\tme.write_off_amount(value)\n\t\t} else {\n\t\t\tme.balance_amount(value)\n\t\t}\n\t}else{\n\t\tthis.update_payment_amount()\n\t}\n}\n\nerpnext.payments.prototype.show_amounts = function(){\n\tvar me = this;\n\t$(this.$body).find(\".write_off_amount\").val(format_currency(this.frm.doc.write_off_amount, this.frm.doc.currency));\n\t$(this.$body).find('.paid_amount').text(format_currency(this.frm.doc.paid_amount, this.frm.doc.currency));\n\t$(this.$body).find('.change_amount').val(format_currency(this.frm.doc.change_amount, this.frm.doc.currency))\n\t$(this.$body).find('.outstanding_amount').text(format_currency(this.frm.doc.outstanding_amount, frappe.get_doc(\":Company\", this.frm.doc.company).default_currency))\n\t$(this.$body).find(\".balance_amount\").val(format_currency(this.frm.doc.balance_amount, this.frm.doc.currency));\n\tthis.update_invoice();\n}"],"names":[],"mappings":"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"}